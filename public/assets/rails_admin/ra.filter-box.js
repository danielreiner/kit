(function(e){var t;e.filters=t={options:{regional:{datePicker:{dateFormat:"mm/dd/yy"}}},append:function(t,n,r,i,s,o,u){var a="f["+n+"]["+u+"][v]",f="f["+n+"]["+u+"][o]";switch(r){case"boolean":var l='<select class="input-small" name="'+a+'">'+'<option value="_discard">...</option>'+'<option value="true"'+(i=="true"?'selected="selected"':"")+">True</option>"+'<option value="false"'+(i=="false"?'selected="selected"':"")+">False</option>"+'<option disabled="disabled">---------</option>'+"<option "+(i=="_present"?'selected="selected"':"")+' value="_present">Is present</option>'+"<option "+(i=="_blank"?'selected="selected"':"")+' value="_blank"  >Is blank</option>'+"</select>";break;case"date":case"datetime":case"timestamp":var l='<select class="switch-additionnal-fieldsets input-small" name="'+f+'">'+"<option "+(s=="default"?'selected="selected"':"")+' data-additional-fieldset="default" value="default">Date ...</option>'+"<option "+(s=="between"?'selected="selected"':"")+' data-additional-fieldset="between" value="between">Between ... and ...</option>'+"<option "+(s=="today"?'selected="selected"':"")+' value="today">Today</option>'+"<option "+(s=="yesterday"?'selected="selected"':"")+' value="yesterday">Yesterday</option>'+"<option "+(s=="this_week"?'selected="selected"':"")+' value="this_week">This week</option>'+"<option "+(s=="last_week"?'selected="selected"':"")+' value="last_week">Last week</option>'+'<option disabled="disabled">---------</option>'+"<option "+(s=="_not_null"?'selected="selected"':"")+' value="_not_null">Is present</option>'+"<option "+(s=="_null"?'selected="selected"':"")+' value="_null" >Is blank</option>'+"</select>",c='<input class="date additional-fieldset default input-small" style="display:'+(!s||s=="default"?"inline-block":"none")+';" type="text" name="'+a+'[]" value="'+(i[0]||"")+'" /> '+'<input placeholder="-∞" class="date additional-fieldset between input-small" style="display:'+(s=="between"?"inline-block":"none")+';" type="text" name="'+a+'[]" value="'+(i[1]||"")+'" /> '+'<input placeholder="∞" class="date additional-fieldset between input-small" style="display:'+(s=="between"?"inline-block":"none")+';" type="text" name="'+a+'[]" value="'+(i[2]||"")+'" />';break;case"enum":var h=i instanceof Array?!0:!1,l='<select style="display:'+(h?"none":"inline-block")+'" '+(h?"":'name="'+a+'"')+' data-name="'+a+'" class="select-single input-small">'+'<option value="_discard">...</option>'+"<option "+(i=="_present"?'selected="selected"':"")+' value="_present">Is present</option>'+"<option "+(i=="_blank"?'selected="selected"':"")+' value="_blank">Is blank</option>'+'<option disabled="disabled">---------</option>'+o+"</select>"+'<select multiple="multiple" style="display:'+(h?"inline-block":"none")+'" '+(h?'name="'+a+'[]"':"")+' data-name="'+a+'[]" class="select-multiple input-small">'+o+"</select> "+'<a href="#" class="switch-select"><i class="icon-'+(h?"minus":"plus")+'"></i></a>';break;case"string":case"text":case"belongs_to_association":var l='<select class="switch-additionnal-fieldsets input-small" value="'+s+'" name="'+f+'">'+'<option data-additional-fieldset="additional-fieldset"'+(s=="like"?'selected="selected"':"")+' value="like">Contains</option>'+'<option data-additional-fieldset="additional-fieldset"'+(s=="is"?'selected="selected"':"")+' value="is">Is exactly</option>'+'<option data-additional-fieldset="additional-fieldset"'+(s=="starts_with"?'selected="selected"':"")+' value="starts_with">Starts with</option>'+'<option data-additional-fieldset="additional-fieldset"'+(s=="ends_with"?'selected="selected"':"")+' value="ends_with">Ends with</option>'+'<option disabled="disabled">---------</option>'+"<option "+(s=="_present"?'selected="selected"':"")+' value="_present">Is present</option>'+"<option "+(s=="_blank"?'selected="selected"':"")+' value="_blank">Is blank</option>'+"</select>",c='<input class="additional-fieldset input-small" style="display:'+(s=="_blank"||s=="_present"?"none":"inline-block")+';" type="text" name="'+a+'" value="'+i+'" /> ';break;case"integer":var l='<select class="switch-additionnal-fieldsets input-small" name="'+f+'">'+"<option "+(s=="default"?'selected="selected"':"")+' data-additional-fieldset="default" value="default">Number ...</option>'+"<option "+(s=="between"?'selected="selected"':"")+' data-additional-fieldset="between" value="between">Between ... and ...</option>'+'<option disabled="disabled">---------</option>'+"<option "+(s=="_not_null"?'selected="selected"':"")+' value="_not_null">Is present</option>'+"<option "+(s=="_null"?'selected="selected"':"")+' value="_null" >Is blank</option>'+"</select>",c='<input class="additional-fieldset default input-small" style="display:'+(!s||s=="default"?"inline-block":"none")+';" type="integer" name="'+a+'[]" value="'+(i[0]||"")+'" /> '+'<input placeholder="-∞" class="additional-fieldset between input-small" style="display:'+(s=="between"?"inline-block":"none")+';" type="integer" name="'+a+'[]" value="'+(i[1]||"")+'" /> '+'<input placeholder="∞" class="additional-fieldset between input-small" style="display:'+(s=="between"?"inline-block":"none")+';" type="integer" name="'+a+'[]" value="'+(i[2]||"")+'" />';break;default:var l='<input type="text" class="input-small" name="'+a+'" value="'+i+'"/> '}var p='<p class="filter form-search"><span class="label label-info form-label"><a href="#" class="delete"><i class="icon-trash icon-white"></i></a> '+t+"</span> "+l+" "+(c||"")+"</div> ";e("#filters_box").append(p),e("#filters_box .date").datepicker(this.options.regional.datePicker),e("hr.filters_box:hidden").show("slow")}},e(document).on("click","#filters a",function(t){t.preventDefault(),e.filters.append(e(this).data("field-label"),e(this).data("field-name"),e(this).data("field-type"),e(this).data("field-value"),e(this).data("field-operator"),e(this).data("field-options"),e.now().toString().slice(6,11))}),e(document).on("click","#filters_box .delete",function(t){t.preventDefault(),form=e(this).parents("form"),e(this).parents(".filter").remove(),!e("#filters_box").children().length&&e("hr.filters_box:visible").hide("slow")}),e(document).on("click","#filters_box .switch-select",function(t){t.preventDefault();var n=e(this).siblings("select:visible"),r=e(this).siblings("select:hidden");r.attr("name",r.data("name")).show("slow"),n.attr("name",null).hide("slow"),e(this).find("i").toggleClass("icon-plus icon-minus")}),e(document).on("change","#filters_box .switch-additionnal-fieldsets",function(t){var n=e(this).find("option:selected");(klass=e(n).data("additional-fieldset"))?(e(this).siblings(".additional-fieldset:not(."+klass+")").hide("slow"),e(this).siblings("."+klass).show("slow")):e(this).siblings(".additional-fieldset").hide("slow")})})(jQuery);