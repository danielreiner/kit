/**
 * @license Copyright (c) 2003-2013, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.html or http://ckeditor.com/license
 */
(function(){function e(e,t){var n=e.type,r=t.type;return n==r?0:n==CKEDITOR.STYLE_OBJECT?-1:r==CKEDITOR.STYLE_OBJECT?1:r==CKEDITOR.STYLE_BLOCK?1:-1}CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",init:function(t){function u(r){t.getStylesSet(function(o){if(!s.length){var u,a;for(var f=0,l=o.length;f<l;f++){var c=o[f];if(t.blockless&&c.element in CKEDITOR.dtd.$block)continue;a=c.name,u=i[a]=new CKEDITOR.style(c),u._name=a,u._.enterMode=n.enterMode,s.push(u)}s.sort(e)}r&&r()})}var n=t.config,r=t.lang.stylescombo,i={},s=[],o;t.ui.addRichCombo("Styles",{label:r.label,title:r.panelTitle,toolbar:"styles,10",panel:{css:[CKEDITOR.skin.getPath("editor")].concat(n.contentsCss),multiSelect:!0,attributes:{"aria-label":r.panelTitle}},init:function(){o=this,u(function(){var e,t,n,i,u,a;for(u=0,a=s.length;u<a;u++)e=s[u],t=e._name,i=e.type,i!=n&&(o.startGroup(r["panelTitle"+String(i)]),n=i),o.add(t,e.type==CKEDITOR.STYLE_OBJECT?t:e.buildPreview(),t);o.commit()})},onClick:function(e){t.focus(),t.fire("saveSnapshot");var n=i[e],r=t.elementPath();t[n.checkActive(r)?"removeStyle":"applyStyle"](n),t.fire("saveSnapshot")},onRender:function(){t.on("selectionChange",function(e){var t=this.getValue(),n=e.data.path,r=n.elements;for(var s=0,o=r.length,u;s<o;s++){u=r[s];for(var a in i)if(i[a].checkElementRemovable(u,!0)){a!=t&&this.setValue(a);return}}this.setValue("")},this)},onOpen:function(){var e=t.getSelection(),n=e.getSelectedElement(),s=t.elementPath(n),o=[0,0,0,0];this.showAll(),this.unmarkAll();for(var u in i){var a=i[u],f=a.type;if(f==CKEDITOR.STYLE_BLOCK&&!s.isContextFor(a.element)){this.hideItem(u);continue}a.checkActive(s)?this.mark(u):f==CKEDITOR.STYLE_OBJECT&&!a.checkApplicable(s)&&(this.hideItem(u),o[f]--),o[f]++}o[CKEDITOR.STYLE_BLOCK]||this.hideGroup(r["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),o[CKEDITOR.STYLE_INLINE]||this.hideGroup(r["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),o[CKEDITOR.STYLE_OBJECT]||this.hideGroup(r["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},reset:function(){o&&(delete o._.panel,delete o._.list,o._.committed=0,o._.items={},o._.state=CKEDITOR.TRISTATE_OFF),i={},s=[],u()}}),t.on("instanceReady",function(){u()})}})})();