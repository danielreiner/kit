(function(){function e(e){for(var t={name:"autoCloseBrackets"},n=0;n<e.length;n+=2)(function(e,n){function r(e){var t=e.getCursor();if(e.getRange(t,CodeMirror.Pos(t.line,t.ch+1))!=n)return CodeMirror.Pass;e.execCommand("goCharRight")}t["'"+e+"'"]=function(t){if(e!=n||r(t)==CodeMirror.Pass){var i=t.getCursor("start"),i=CodeMirror.Pos(i.line,i.ch+1);t.replaceSelection(e+n,{head:i,anchor:i})}},e!=n&&(t["'"+n+"'"]=r)})(e.charAt(n),e.charAt(n+1));return t}CodeMirror.defineOption("autoCloseBrackets",!1,function(t,n,r){r=r&&r!=CodeMirror.Init,n&&!r?t.addKeyMap(e(typeof n=="string"?n:"()[]{}''\"\"")):!n&&r&&t.removeKeyMap("autoCloseBrackets")})})(),function(){function e(e,i){var s=e.getCursor(),o=e.getTokenAt(s),u=CodeMirror.innerMode(e.getMode(),o.state),a=u.state,f,l;if("xml"!=u.mode.name)return CodeMirror.Pass;var p=e.getOption("autoCloseTags"),d="html"==u.mode.configuration,u="object"==typeof p&&p.dontCloseTags||d&&n,p="object"==typeof p&&p.indentTags||d&&r;if(">"==i&&a.tagName){if(l=a.tagName,o.end>s.ch&&(l=l.slice(0,l.length-o.end+s.ch)),f=l.toLowerCase(),"tag"==o.type&&"closeTag"==a.type||/\/\s*$/.test(o.string)||u&&-1<t(u,f))return CodeMirror.Pass;a=(o=p&&-1<t(p,f))?CodeMirror.Pos(s.line+1,0):CodeMirror.Pos(s.line,s.ch+1),e.replaceSelection(">"+(o?"\n\n":"")+"</"+l+">",{head:a,anchor:a}),o&&(e.indentLine(s.line+1),e.indentLine(s.line+2))}else{if("/"!=i||"<"!=o.string)return CodeMirror.Pass;(l=a.context&&a.context.tagName)&&e.replaceSelection("/"+l+">","end")}}function t(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(t,n,r){n&&(r==CodeMirror.Init||!r)?(r={name:"autoCloseTags"},(typeof n!="object"||n.whenClosing)&&(r["'/'"]=function(t){return e(t,"/")}),(typeof n!="object"||n.whenOpening)&&(r["'>'"]=function(t){return e(t,">")}),t.addKeyMap(r)):!n&&r!=CodeMirror.Init&&r&&t.removeKeyMap("autoCloseTags")});var n="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),r="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ")}(),function(){function e(e){function t(t,n,r){var s,u,f,l;if(t.text){s=c?0:t.text.length-1,u=c?t.text.length:-1;for(null!=r&&(s=r+h);s!=u;s+=h)if(f=t.text.charAt(s),v.test(f)&&e.getTokenAt(i(n,s+1)).type==p)if(l=o[f],">"==l.charAt(1)==c)d.push(f);else{if(d.pop()!=l.charAt(0))return{pos:s,match:!1};if(!d.length)return{pos:s,match:!0}}}}var n=e.getCursor(),r=e.getLineHandle(n.line),s=n.ch-1,u=0<=s&&o[r.text.charAt(s)]||o[r.text.charAt(++s)],f,l;if(!u)return null;var c=">"==u.charAt(1),h=c?1:-1,p=e.getTokenAt(i(n.line,s+1)).type,d=[r.text.charAt(s)],v=/[(){}[\]]/,u=n.line;for(l=c?Math.min(u+100,e.lineCount()):Math.max(-1,u-100);u!=l&&(f=u==n.line?t(r,u,s):t(e.getLineHandle(u),u),!f);u+=h);return{from:i(n.line,s),to:f&&i(u,f.pos),match:f&&f.match}}function t(t,n){var o=e(t);if(o&&!(t.getLine(o.from.line).length>s)&&(!o.to||!(t.getLine(o.to.line).length>s))){var u=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",l=t.markText(o.from,i(o.from.line,o.from.ch+1),{className:u}),c=o.to&&t.markText(o.to,i(o.to.line,o.to.ch+1),{className:u});if(r&&t.state.focused&&t.display.input.focus(),o=function(){t.operation(function(){l.clear(),c&&c.clear()})},!n)return o;setTimeout(o,800)}}function n(e){e.operation(function(){u&&(u(),u=null),e.somethingSelected()||(u=t(e,!1))})}var r=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),i=CodeMirror.Pos,s=1e3,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},u=null;CodeMirror.defineOption("matchBrackets",!1,function(e,t){t?e.on("cursorActivity",n):e.off("cursorActivity",n)}),CodeMirror.defineExtension("matchBrackets",function(){t(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(){return e(this)})}(),CodeMirror.tagRangeFinder=function(e,t){for(var n=RegExp("^[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*"),r=e.getLine(t.line),i=!1,s=null,o=t.ch,u,a,f,l,c,h,p;!i;){if(o=r.indexOf("<",o),-1==o)return;if(o+1<r.length&&"/"==r[o+1])o++;else if(r.substr(o+1).match(n)){if(u=r.indexOf(">",o+1),-1==u){var i=t.line+1,d=!1;for(l=e.lineCount();i<l&&!d;){if(a=e.getLine(i),u=a.indexOf(">"),-1!=u&&(d=!0,f=a.lastIndexOf("/",u),-1!=f&&f<u&&(c=r.substr(f,u-f+1),!c.match(/\/\s*\>/))))return;i++}i=!0}else l=r.lastIndexOf("/",u),-1==l?i=!0:(c=r.substr(l,u-l+1),c.match(/\/\s*\>/)||(i=!0));i&&(h=r.substr(o+1),s=h.match(n),s?(s=s[0],-1!=r.indexOf("</"+s+">",o)&&(i=!1)):i=!1),i||o++}else o++}if(i){n=RegExp("(\\<\\/"+s+"\\>)|(\\<"+s+"\\>)|(\\<"+s+"\\s)|(\\<"+s+"$)"),o="</"+s+">",a=1,i=t.line+1;for(l=e.lineCount();i<l;){if(r=e.getLine(i),p=r.match(n),p)for(s=0;s<p.length;s++)if(p[s]==o?a--:a++,!a)return{from:CodeMirror.Pos(t.line,u+1),to:CodeMirror.Pos(i,p.index)};i++}}},CodeMirror.braceRangeFinder=function(e,t){for(var n=t.line,r=e.getLine(n),i=r.length,s,o,u,a,f,l,c,h,p;!(u=r.lastIndexOf("{",i),u<t.ch);){if(o=e.getTokenAt(CodeMirror.Pos(n,u+1)).type,!/^(comment|string)/.test(o)){s=u;break}i=u-1}if(null!=s&&!(r.lastIndexOf("}")>s)){r=1,i=e.lineCount(),u=n+1;e:for(;u<i;++u){l=e.getLine(u);for(c=0;h=l.indexOf("{",c),p=l.indexOf("}",c),0>h&&(h=l.length),0>p&&(p=l.length),c=Math.min(h,p),c!=l.length;){if(e.getTokenAt(CodeMirror.Pos(u,c+1)).type==o)if(c==h)++r;else if(!--r){a=u,f=c;break e}++c}}if(null!=a&&a!=n+1)return{from:CodeMirror.Pos(n,s+1),to:CodeMirror.Pos(a,f)}}},CodeMirror.indentRangeFinder=function(e,t){for(var n=e.getOption("tabSize"),r=e.getLine(t.line),i=CodeMirror.countColumn(r,null,n),s,o=t.line+1,u=e.lineCount();o<u;++o)if(s=e.getLine(o),CodeMirror.countColumn(s,null,n)<i&&CodeMirror.countColumn(e.getLine(o-1),null,n)>i)return{from:CodeMirror.Pos(t.line,r.length),to:CodeMirror.Pos(o,s.length)}},CodeMirror.newFoldFunction=function(e,t){if(null==t&&(t="â†”"),"string"==typeof t){var n=document.createTextNode(t),t=document.createElement("span");t.appendChild(n),t.className="CodeMirror-foldmarker"}return function(n,r){var i,s,o,u,a;if("number"==typeof r&&(r=CodeMirror.Pos(r,0)),i=e(n,r),i){s=n.findMarksAt(i.from);for(u=o=0;u<s.length;++u)s[u].__isFold&&(++o,s[u].clear());o||(s=t.cloneNode(!0),CodeMirror.on(s,"mousedown",function(){a.clear()}),a=n.markText(i.from,i.to,{replacedWith:s,clearOnEnter:!0,__isFold:!0}))}}},function(){CodeMirror.defineExtension("autoFormatAll",function(e,t){for(var n=this,r=n.getMode(),i=n.getRange(e,t).split("\n"),s=CodeMirror.copyState(r,n.getTokenAt(e).state),o=n.getOption("tabSize"),u="",a=0,f=0==e.ch,l,c=0;c<i.length;++c){for(l=new CodeMirror.StringStream(i[c],o);!l.eol();){var h=CodeMirror.innerMode(r,s),p=r.token(l,s),d=l.current();l.start=l.pos,(!f||/\S/.test(d))&&(u+=d,f=!1),!f&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(p,d,l.string.slice(l.pos)||i[c+1]||"",h.state)&&(u+="\n",f=!0,++a)}!l.pos&&r.blankLine&&r.blankLine(s),!f&&c<i.length-1&&(u+="\n",f=!0,++a)}n.operation(function(){n.replaceRange(u,e,t);for(var r=e.line+1,i=e.line+a;r<=i;++r)n.indentLine(r,"smart");n.setCursor({line:0,ch:0})})})}(),function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,r){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):";"==t&&r.lexical&&")"==r.lexical.type?!1:/^[;{}]$/.test(t)&&!/^;/.test(n)}});var e=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(t,n,r,i){var s=!1;return"html"==this.configuration&&(s=i.context?e.test(i.context.tagName):!1),!s&&("tag"==t&&/>$/.test(n)&&i.context||/^</.test(r))}}),CodeMirror.defineExtension("commentRange",function(e,t,n){var r=this,i=CodeMirror.innerMode(r.getMode(),r.getTokenAt(t).state).mode;r.operation(function(){if(e)r.replaceRange(i.commentEnd,n),r.replaceRange(i.commentStart,t),t.line==n.line&&t.ch==n.ch&&r.setCursor(t.line,t.ch+i.commentStart.length);else{var s=r.getRange(t,n),o=s.indexOf(i.commentStart),u=s.lastIndexOf(i.commentEnd);-1<o&&-1<u&&u>o&&(s=s.substr(0,o)+s.substring(o+i.commentStart.length,u)+s.substr(u+i.commentEnd.length)),r.replaceRange(s,t,n)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var r=e.line;r<=t.line;r++)n.indentLine(r,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){for(var n=this,r=n.getMode(),i=n.getRange(e,t).split("\n"),s=CodeMirror.copyState(r,n.getTokenAt(e).state),o=n.getOption("tabSize"),u="",a=0,f=0==e.ch,l,c=0;c<i.length;++c){for(l=new CodeMirror.StringStream(i[c],o);!l.eol();){var h=CodeMirror.innerMode(r,s),p=r.token(l,s),d=l.current();l.start=l.pos,(!f||/\S/.test(d))&&(u+=d,f=!1),!f&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(p,d,l.string.slice(l.pos)||i[c+1]||"",h.state)&&(u+="\n",f=!0,++a)}!l.pos&&r.blankLine&&r.blankLine(s),!f&&c<i.length-1&&(u+="\n",f=!0,++a)}n.operation(function(){n.replaceRange(u,e,t);for(var r=e.line+1,i=e.line+a;r<=i;++r)n.indentLine(r,"smart");n.setSelection(e,n.getCursor(!1))})})}(),function(){function e(e){this.minChars="object"==typeof e&&e.minChars||r,this.style="object"==typeof e&&e.style||i,this.overlay=null}function t(e){e.operation(function(){var t=e._matchHighlightState,r;(t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null),e.somethingSelected())&&((r=e.getSelection().replace(/^\s+|\s+$/g,""),r.length<t.minChars)||e.addOverlay(t.overlay=n(r,t.style)))})}function n(e,t){return{token:function(n){if(n.match(e))return t;n.next(),n.skipTo(e.charAt(0))||n.skipToEnd()}}}var r=2,i="matchhighlight";CodeMirror.defineOption("highlightSelectionMatches",!1,function(n,r,i){var i=i&&i!=CodeMirror.Init,s;r&&!i?(n._matchHighlightState=new e(r),n.on("cursorActivity",t)):!r&&i&&(s=n._matchHighlightState.overlay,s&&n.removeOverlay(s),n._matchHighlightState=null,n.off("cursorActivity",t))})}();