(function(){function e(e){function t(t,n,r){if(t.text){var s=a?0:t.text.length-1,u=a?t.text.length:-1;for(null!=r&&(s=r+f);s!=u;s+=f)if(r=t.text.charAt(s),h.test(r)&&e.getTokenAt(i(n,s+1)).type==l){var p=o[r];if(">"==p.charAt(1)==a)c.push(r);else{if(c.pop()!=p.charAt(0))return{pos:s,match:!1};if(!c.length)return{pos:s,match:!0}}}}}var n=e.getCursor(),r=e.getLineHandle(n.line),s=n.ch-1,u=0<=s&&o[r.text.charAt(s)]||o[r.text.charAt(++s)];if(!u)return null;for(var a=">"==u.charAt(1),f=a?1:-1,l=e.getTokenAt(i(n.line,s+1)).type,c=[r.text.charAt(s)],h=/[(){}[\]]/,u=n.line,p,d=a?Math.min(u+100,e.lineCount()):Math.max(-1,u-100);u!=d&&!(p=u==n.line?t(r,u,s):t(e.getLineHandle(u),u));u+=f);return{from:i(n.line,s),to:p&&i(u,p.pos),match:p&&p.match}}function t(t,n){var o=e(t);if(o&&!(t.getLine(o.from.line).length>s||o.to&&t.getLine(o.to.line).length>s)){var u=o.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",a=t.markText(o.from,i(o.from.line,o.from.ch+1),{className:u}),f=o.to&&t.markText(o.to,i(o.to.line,o.to.ch+1),{className:u});r&&t.state.focused&&t.display.input.focus(),o=function(){t.operation(function(){a.clear(),f&&f.clear()})};if(!n)return o;setTimeout(o,800)}}function n(e){e.operation(function(){u&&(u(),u=null),e.somethingSelected()||(u=t(e,!1))})}var r=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),i=CodeMirror.Pos,s=1e3,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},u=null;CodeMirror.defineOption("matchBrackets",!1,function(e,t){t?e.on("cursorActivity",n):e.off("cursorActivity",n)}),CodeMirror.defineExtension("matchBrackets",function(){t(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(){return e(this)})})();