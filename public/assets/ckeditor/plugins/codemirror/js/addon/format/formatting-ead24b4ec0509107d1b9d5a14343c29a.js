(function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t){return/^[;{}]$/.test(t)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(e,t,n,r){return this.jsonMode?/^[\[,{]$/.test(t)||/^}/.test(n):";"==t&&r.lexical&&")"==r.lexical.type?!1:/^[;{}]$/.test(t)&&!/^;/.test(n)}});var e=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(t,n,r,i){var s=!1;return"html"==this.configuration&&(s=i.context?e.test(i.context.tagName):!1),!s&&("tag"==t&&/>$/.test(n)&&i.context||/^</.test(r))}}),CodeMirror.defineExtension("commentRange",function(e,t,n){var r=this,i=CodeMirror.innerMode(r.getMode(),r.getTokenAt(t).state).mode;r.operation(function(){if(e)r.replaceRange(i.commentEnd,n),r.replaceRange(i.commentStart,t),t.line==n.line&&t.ch==n.ch&&r.setCursor(t.line,t.ch+i.commentStart.length);else{var s=r.getRange(t,n),o=s.indexOf(i.commentStart),u=s.lastIndexOf(i.commentEnd);-1<o&&-1<u&&u>o&&(s=s.substr(0,o)+s.substring(o+i.commentStart.length,u)+s.substr(u+i.commentEnd.length)),r.replaceRange(s,t,n)}})}),CodeMirror.defineExtension("autoIndentRange",function(e,t){var n=this;this.operation(function(){for(var r=e.line;r<=t.line;r++)n.indentLine(r,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(e,t){for(var n=this,r=n.getMode(),i=n.getRange(e,t).split("\n"),s=CodeMirror.copyState(r,n.getTokenAt(e).state),o=n.getOption("tabSize"),u="",a=0,f=0==e.ch,l=0;l<i.length;++l){for(var c=new CodeMirror.StringStream(i[l],o);!c.eol();){var h=CodeMirror.innerMode(r,s),p=r.token(c,s),d=c.current();c.start=c.pos;if(!f||/\S/.test(d))u+=d,f=!1;!f&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(p,d,c.string.slice(c.pos)||i[l+1]||"",h.state)&&(u+="\n",f=!0,++a)}!c.pos&&r.blankLine&&r.blankLine(s),!f&&l<i.length-1&&(u+="\n",f=!0,++a)}n.operation(function(){n.replaceRange(u,e,t);for(var r=e.line+1,i=e.line+a;r<=i;++r)n.indentLine(r,"smart");n.setSelection(e,n.getCursor(!1))})})})();