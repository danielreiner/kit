CodeMirror.defineMode("htmlmixed",function(e,t){function n(e,t){var n=t.htmlState.tagName,r=o.token(e,t.htmlState);if("script"==n&&/\btag\b/.test(r)&&">"==e.current()){(n=(n=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i))?n[1]:"")&&/[\"\']/.test(n.charAt(0))&&(n=n.slice(1,n.length-1));for(var f=0;f<a.length;++f){var l=a[f];if("string"==typeof l.matches?n==l.matches:l.matches.test(n)){l.mode&&(t.token=i,t.localMode=l.mode,t.localState=l.mode.startState&&l.mode.startState(o.indent(t.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(r)&&">"==e.current()&&(t.token=s,t.localMode=u,t.localState=u.startState(o.indent(t.htmlState,"")));return r}function r(e,t,n){var r=e.current(),i=r.search(t);return-1<i?e.backUp(r.length-i):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r[0])),n}function i(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,n(e,t)):r(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function s(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=n,t.localState=t.localMode=null,n(e,t)):r(e,/<\/\s*style\s*>/,u.token(e,t.localState))}var o=CodeMirror.getMode(e,{name:"xml",htmlMode:!0}),u=CodeMirror.getMode(e,"css"),a=[],f=t&&t.scriptTypes;a.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(e,"javascript")});if(f)for(var l=0;l<f.length;++l){var c=f[l];a.push({matches:c.matches,mode:c.mode&&CodeMirror.getMode(e,c.mode)})}return a.push({matches:/./,mode:CodeMirror.getMode(e,"text/plain")}),{startState:function(){var e=o.startState();return{token:n,localMode:null,localState:null,htmlState:e}},copyState:function(e){if(e.localState)var t=CodeMirror.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:t,htmlState:CodeMirror.copyState(o,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){return!e.localMode||/^\s*<\//.test(t)?o.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||o}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed");